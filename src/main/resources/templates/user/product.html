<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cửa hàng - FruitGarden</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        :root { --primary-green: #28a745; --dark-green: #1b4332; }
        body { background-color: #f8f9fa; font-family: 'Roboto', sans-serif; }

        /* Navbar Styles */
        .navbar-custom { background: linear-gradient(90deg, #1b4332 0%, #28a745 100%); padding: 15px 0; }
        .navbar-brand { font-family: 'Montserrat', sans-serif; font-weight: 700; color: white !important; font-size: 1.5rem; }
        .nav-link { color: rgba(255,255,255,0.9) !important; font-weight: 500; margin-left: 15px; transition: 0.3s; }
        .nav-link:hover { color: #ffc107 !important; transform: translateY(-2px); }
        .badge-cart { background: #ffc107; color: #1b4332; font-weight: bold; border-radius: 50%; padding: 4px 8px; position: relative; top: -8px; left: -5px; font-size: 0.75rem; }

        /* Sidebar Categories */
        .list-group-item { border: none; padding: 12px 20px; font-weight: 500; color: #555; transition: 0.2s; background: transparent; }
        .list-group-item:hover, .list-group-item.active { background-color: rgba(40, 167, 69, 0.1); color: var(--primary-green); border-left: 4px solid var(--primary-green); }
        .list-group-item i { width: 25px; }

        /* Product Card */
        .card-product { border: none; border-radius: 15px; overflow: hidden; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; height: 100%; }
        .card-product:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .product-img-wrap { position: relative; overflow: hidden; height: 200px; }
        .product-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .card-product:hover .product-img { transform: scale(1.1); }

        /* Buttons on Image Hover */
        .action-links { position: absolute; bottom: -50px; left: 0; right: 0; background: rgba(255,255,255,0.9); padding: 10px; text-align: center; transition: 0.3s; }
        .card-product:hover .action-links { bottom: 0; }

        .price { color: var(--primary-green); font-weight: 700; font-size: 1.1rem; }
        .old-price { font-size: 0.9rem; text-decoration: line-through; color: #999; margin-left: 8px; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-custom sticky-top shadow-sm">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}"><i class="fas fa-leaf me-2"></i>FruitGarden</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">Trang chủ</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/product/list}">Sản phẩm</a></li>
                <li class="nav-item">
                    <a class="nav-link position-relative" th:href="@{/cart/view}">
                        <i class="fas fa-shopping-cart fa-lg"></i>
                        <span class="badge-cart">3</span> </a>
                </li>
                <li class="nav-item"><a class="nav-link btn btn-sm btn-outline-light px-3 ms-2 rounded-pill" th:href="@{/login}" style="border:1px solid rgba(255,255,255,0.5)">Đăng nhập</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container py-5">
    <div class="row">
        <div class="col-lg-3 mb-4">
            <div class="card border-0 shadow-sm rounded-4">
                <div class="card-header bg-white border-0 py-3">
                    <h5 class="fw-bold mb-0 text-dark"><i class="fas fa-bars me-2 text-success"></i>Danh mục</h5>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="/product/list" class="list-group-item active">
                            <i class="fas fa-th-large"></i> Tất cả sản phẩm
                        </a>
                        <a th:each="c : ${cates}" th:href="@{|/product/list-by-category/${c.id}|}"
                           class="list-group-item list-group-item-action">
                            <i class="fas fa-carrot"></i> <span th:text="${c.name}">Rau củ</span>
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-4 rounded-4 overflow-hidden shadow-sm position-relative">
                <img src="https://images.unsplash.com/photo-1610832958506-aa56368176cf?w=400" class="w-100" style="height: 300px; object-fit: cover; filter: brightness(0.8);">
                <div class="position-absolute top-50 start-50 translate-middle text-center text-white w-100 p-3">
                    <h4 class="fw-bold">FRESH FOOD</h4>
                    <p class="small">Giảm giá 20% cuối tuần</p>
                    <button class="btn btn-warning btn-sm rounded-pill fw-bold">Mua ngay</button>
                </div>
            </div>
        </div>

        <div class="col-lg-9">
            <div class="d-flex justify-content-between align-items-center mb-4 bg-white p-3 rounded-4 shadow-sm">
                <h4 class="fw-bold mb-0 text-dark">Sản phẩm nổi bật</h4>
                <select class="form-select w-auto border-0 bg-light rounded-pill">
                    <option>Mới nhất</option>
                    <option>Giá tăng dần</option>
                    <option>Giá giảm dần</option>
                </select>
            </div>

            <div class="row row-cols-1 row-cols-md-3 g-4">

                <div class="col" th:each="p : ${items}">
                    <div class="card card-product h-100">
                        <div class="product-img-wrap">
                            <a th:href="@{|/product/detail/${p.id}|}">
                                <img th:src="@{|/images/products/${p.image}|}" class="product-img"
                                     onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                            </a>
                            <div class="action-links">
                                <a th:href="@{|/product/detail/${p.id}|}" class="btn btn-sm btn-outline-dark rounded-circle me-2" title="Xem nhanh"><i class="fas fa-eye"></i></a>
                                <a th:href="@{|/cart/add/${p.id}|}" class="btn btn-sm btn-success rounded-circle" title="Thêm vào giỏ"><i class="fas fa-cart-plus"></i></a>
                            </div>
                        </div>
                        <div class="card-body text-center d-flex flex-column">
                            <div class="mb-2 small text-uppercase text-muted" th:text="${p.category.name}">Loại hàng</div>
                            <h5 class="card-title fw-bold mb-auto">
                                <a th:href="@{|/product/detail/${p.id}|}" class="text-decoration-none text-dark" th:text="${p.name}">Táo Envy Mỹ</a>
                            </h5>
                            <div class="mt-3">
                                <span class="price" th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + ' ₫'">150.000 ₫</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div th:if="${items.isEmpty()}" class="col-12 text-center py-5">
                    <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
                    <p class="text-muted">Không tìm thấy sản phẩm nào trong danh mục này.</p>
                    <a href="/product/list" class="btn btn-outline-success rounded-pill">Xem tất cả</a>
                </div>

            </div>
        </div>
    </div>
</div>

<footer class="bg-dark text-white py-4 mt-5">
    <div class="container text-center">
        <p class="mb-0">&copy; 2026 FruitGarden. All rights reserved.</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>